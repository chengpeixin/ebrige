{"id":"../src/core/brige.ts","dependencies":[{"name":"/home/xpc/myProject/vue-brige/eBrige/tsconfig.json","includedInParent":true,"mtime":1560421872162},{"name":"/home/xpc/myProject/vue-brige/eBrige/package.json","includedInParent":true,"mtime":1562730892606},{"name":"./../helpers/util","loc":{"line":4,"column":23},"parent":"/home/xpc/myProject/vue-brige/eBrige/src/core/brige.ts","resolved":"/home/xpc/myProject/vue-brige/eBrige/src/helpers/util.ts"},{"name":"./../helpers/medium","loc":{"line":2,"column":26},"parent":"/home/xpc/myProject/vue-brige/eBrige/src/core/brige.ts","resolved":"/home/xpc/myProject/vue-brige/eBrige/src/helpers/medium.ts"},{"name":"./obser","loc":{"line":3,"column":21},"parent":"/home/xpc/myProject/vue-brige/eBrige/src/core/brige.ts","resolved":"/home/xpc/myProject/vue-brige/eBrige/src/core/obser.ts"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = brige;\n\nvar _util = require(\"./../helpers/util\");\n\nvar _medium = require(\"./../helpers/medium\");\n\nvar _obser = _interopRequireDefault(require(\"./obser\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction brige(_a) {\n  var url = _a.url,\n      requestData = _a.requestData,\n      cb = _a.cb,\n      action = _a.action;\n  return new Promise(function (resolve, reject) {\n    var callId = action + Date.now();\n    console.log(callId);\n    var requestUrl = url + \"callId=\" + callId;\n    var medium = (0, _util.createIframe)();\n    (0, _medium.setMedium)(medium, requestUrl);\n    sendRequest(medium);\n    var ob = new _obser.default(callId, requestData);\n    ob.onRechanged(function (_a) {\n      var response = _a.response,\n          failed = _a.failed;\n\n      if ((0, _util.isFunction)(cb)) {\n        cb(response);\n      } else {\n        if ((0, _util.isNull)(failed.failedTime)) {\n          resolve(response);\n        } else {\n          reject(failed);\n        }\n      }\n    });\n    setTimeout(function () {\n      document.body.removeChild(medium);\n      medium = null;\n    });\n  });\n}\n\nfunction sendRequest(medium) {\n  var body = document.body;\n  body.appendChild(medium);\n}"},"sourceMaps":null,"error":null,"hash":"d14ae4b7f1a69f9435e381f28a1b7cb4","cacheData":{"env":{}}}