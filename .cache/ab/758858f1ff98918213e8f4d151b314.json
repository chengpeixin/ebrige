{"id":"../src/core/brige.ts","dependencies":[{"name":"/home/xpc/myProject/vue-brige/eBrige/tsconfig.json","includedInParent":true,"mtime":1560421872162},{"name":"/home/xpc/myProject/vue-brige/eBrige/package.json","includedInParent":true,"mtime":1561087127658},{"name":"./../helpers/util","loc":{"line":1,"column":41},"parent":"/home/xpc/myProject/vue-brige/eBrige/src/core/brige.ts","resolved":"/home/xpc/myProject/vue-brige/eBrige/src/helpers/util.ts"},{"name":"./../helpers/medium","loc":{"line":2,"column":26},"parent":"/home/xpc/myProject/vue-brige/eBrige/src/core/brige.ts","resolved":"/home/xpc/myProject/vue-brige/eBrige/src/helpers/medium.ts"},{"name":"./obser","loc":{"line":3,"column":21},"parent":"/home/xpc/myProject/vue-brige/eBrige/src/core/brige.ts","resolved":"/home/xpc/myProject/vue-brige/eBrige/src/core/obser.ts"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = brige;\n\nvar _util = require(\"./../helpers/util\");\n\nvar _medium = require(\"./../helpers/medium\");\n\nvar _obser = _interopRequireDefault(require(\"./obser\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction brige(_a) {\n  var url = _a.url,\n      data = _a.data,\n      cb = _a.cb,\n      action = _a.action;\n  return new Promise(function (resolve, reject) {\n    var callId = action + Date.now();\n    var requestUrl = url + \"data=\" + data + \"&callId=\" + callId;\n    var medium = (0, _util.createIframe)();\n    (0, _medium.setMedium)(medium, requestUrl);\n    sendRequest(medium);\n    var ob = new _obser.default(callId);\n    console.log(requestUrl);\n    ob.onResolved(function (_a) {\n      var status = _a.status,\n          data = _a.data;\n\n      if ((0, _util.isFunction)(cb)) {\n        cb(data);\n      } else {\n        if (status !== 1) {\n          reject(status);\n        }\n\n        resolve(data);\n      }\n    });\n    setTimeout(function () {\n      document.body.removeChild(medium);\n      medium = null;\n    });\n  });\n}\n\nfunction sendRequest(medium) {\n  var body = document.body;\n  body.appendChild(medium);\n}"},"sourceMaps":null,"error":null,"hash":"790dfe6cbd304e0db39d8eea511d9daf","cacheData":{"env":{}}}